// Generated by CIRCT firtool-1.105.0
module BranchUnit(	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  input         clock,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
                reset,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  input  [31:0] io_rs1,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
                io_rs2,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
                io_pc,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  input  [11:0] io_imm,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  input  [2:0]  io_branchOp,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  input         io_valid,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  output        io_taken,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  output [31:0] io_target,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
                io_nextPc,	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
  output        io_misaligned	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:10:14
);

  wire
    struct packed {logic [31:0] rs1; logic [31:0] rs2; logic [31:0] pc; logic [11:0] imm; logic [2:0] branchOp; logic valid; logic taken; logic [31:0] target; logic [31:0] nextPc; logic misaligned; }
    io;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  wire [31:0] _io_taken_T_5 = io.rs1;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :36:47
  wire [31:0] _io_taken_T_9 = io.rs1;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :37:47
  wire [31:0] _io_taken_T_6 = io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :36:63
  wire [31:0] _io_taken_T_10 = io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :37:64
  wire [31:0] _targetAddr_T = io.pc;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :27:27
  wire [32:0] _targetAddr_T_1 =
    {_targetAddr_T[31], _targetAddr_T} + {{21{io.imm[11]}}, io.imm};	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :27:{27,34}
  wire [31:0] _targetAddr_T_2 = _targetAddr_T_1[31:0];	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:34
  wire [31:0] _targetAddr_T_3 = _targetAddr_T_2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:34
  wire [31:0] targetAddr = _targetAddr_T_3;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:{34,44}
  wire [31:0] _io_target_T = targetAddr & 32'hFFFFFFFC;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:44, :28:27
  wire [1:0]  _io_misaligned_T = targetAddr[1:0];	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:44, :31:30
  wire        _io_misaligned_T_1 = |_io_misaligned_T;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:31:{30,37}
  wire        _io_taken_T = io.branchOp == 3'h0;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :34:31
  wire        _io_taken_T_1 = io.rs1 == io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :34:47
  wire        _io_taken_T_2 = io.branchOp == 3'h1;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :35:31
  wire        _io_taken_T_3 = io.rs1 != io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :35:47
  wire        _io_taken_T_4 = io.branchOp == 3'h4;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :36:31
  wire        _io_taken_T_7 = $signed(_io_taken_T_5) < $signed(_io_taken_T_6);	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:36:{47,54,63}
  wire        _io_taken_T_8 = io.branchOp == 3'h5;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :37:31
  wire        _io_taken_T_11 = $signed(_io_taken_T_9) >= $signed(_io_taken_T_10);	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:37:{47,54,64}
  wire        _io_taken_T_12 = io.branchOp == 3'h6;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :38:31
  wire        _io_taken_T_13 = io.rs1 < io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :38:47
  wire        _io_taken_T_14 = &io.branchOp;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :39:31
  wire        _io_taken_T_15 = io.rs1 >= io.rs2;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :39:47
  wire        _io_taken_T_16 = _io_taken_T_14 & _io_taken_T_15;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:39:{18,31,47}
  wire        _io_taken_T_17 = _io_taken_T_12 ? _io_taken_T_13 : _io_taken_T_16;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:38:{18,31,47}, :39:18
  wire        _io_taken_T_18 = _io_taken_T_8 ? _io_taken_T_11 : _io_taken_T_17;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:37:{18,31,54}, :38:18
  wire        _io_taken_T_19 = _io_taken_T_4 ? _io_taken_T_7 : _io_taken_T_18;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:36:{18,31,54}, :37:18
  wire        _io_taken_T_20 = _io_taken_T_2 ? _io_taken_T_3 : _io_taken_T_19;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:35:{18,31,47}, :36:18
  wire        _io_taken_T_21 = _io_taken_T ? _io_taken_T_1 : _io_taken_T_20;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:34:{18,31,47}, :35:18
  wire        _io_taken_T_22 = _io_taken_T_21 & io.valid;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :34:18, :40:29
  wire        _io_taken_T_23 = ~io.misaligned;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :40:44
  wire        _io_taken_T_24 = _io_taken_T_22 & _io_taken_T_23;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:40:{29,41,44}
  wire [32:0] _io_nextPc_T = {1'h0, _targetAddr_T} + 33'h4;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:27:27, :43:47
  wire [31:0] _io_nextPc_T_1 = _io_nextPc_T[31:0];	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:43:47
  wire [31:0] _io_nextPc_T_2 = io.taken ? io.target : _io_nextPc_T_1;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :43:{19,47}
  assign io =
    '{rs1: io_rs1,
      rs2: io_rs2,
      pc: io_pc,
      imm: io_imm,
      branchOp: io_branchOp,
      valid: io_valid,
      taken: _io_taken_T_24,
      target: _io_target_T,
      nextPc: _io_nextPc_T_2,
      misaligned: _io_misaligned_T_1};	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7, :28:{13,27}, :31:{17,37}, :34:12, :40:41, :43:{13,19}
  assign io_taken = io.taken;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  assign io_target = io.target;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  assign io_nextPc = io.nextPc;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
  assign io_misaligned = io.misaligned;	// src/main/scala/OctoNyteCore/BranchUnit/BranchUnit.scala:9:7
endmodule

